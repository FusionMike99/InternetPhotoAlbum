@model InternetPhotoAlbum.MVC.Models.IndexImageViewModel

@{
    ViewBag.Title = "Details";
}

<h2>Details</h2>

<div id="modDialog" class="modal fade">
    <div id="dialogContent" class="modal-dialog"></div>
</div>

<div class="card col-4 my-2 mx-auto">
    <img class="card-img-top col-12" src="data:image/jpeg;base64,@Model.File" alt="@Model.Title">
    <div class="card-body">
        <h4 class="card-title text-center">@Model.Title</h4>
        <p class="card-text">@Model.Description</p>

        @Html.ActionLink("Edit", "Edit", new { id = Model.Id }, new { @class = "editDialLink btn btn-warning" })
        @Html.ActionLink("Delete", "Delete", new { id = Model.Id }, new { @class = "deleteDialLink btn btn-danger" })

        @Html.Partial("~/Views/Ratings/ImageRating.cshtml", (Model.Id, (int)ViewData["LikeId"]))
    </div>
</div>
<p>
    @Html.ActionLink("Back to Album", "Index", new { albumId = (int)ViewData["AlbumId"] }, new { @class = "btn btn-info text-light" })
</p>

@section scripts
{
    <script type="text/javascript">

        $(function () {
            $.ajaxSetup({ cache: false });
            $(".editDialLink").click(function (e) {

                e.preventDefault();
                $.get(this.href, function (data) {
                    $('#dialogContent').html(data);
                    $('#modDialog').modal('show');
                });
            });

            $(".deleteDialLink").click(function (e) {

                e.preventDefault();
                $.get(this.href, function (data) {
                    $('#dialogContent').html(data);
                    $('#modDialog').modal('show');
                });
            });
        });

    </script>
}